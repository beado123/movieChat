{% extends "base.html" %}

{% block body %}

      <form c>
      <div class="center card card-image" style="background-image: url(/static/img/grey.jpg);">

        <div class="form-group">
          <div class="label">
            <h2 class="display-2">Search Engine</h2>
          </div>
        </div>

      <br>
      <div class="form-group">

        <div class="label">

          <h3>Release Year</h3>
        </div>

        <div class="inputs">

          <input name="release_year-min" size="4" maxlength="4" > to <input name="release_year-max" size="4" >
        </div>
      </div>

      <div class="form-group">
        <div class="label">

          <h3>Runtime</h3>
        </div>
        <div class="inputs">

          <input name="runtime-min" size="4" onkeyup="forceNumeric(this)" onchange="forceNumeric(this)"> to <input name="runtime-max" size="4" onkeyup="forceNumeric(this)" onchange="forceNumeric(this)">

        </div>
      </div>

      <div class="form-group">
        <div class="label">

          <h3>User Rating</h3>
        </div>
        <div class="inputs">

          <select name="user_rating-min">
            <option value="" selected="true">-</option>

            <option>1.0</option>
            <option>1.1</option>
            <option>1.2</option>
            <option>1.3</option>
            <option>1.4</option>
            <option>1.5</option>
            <option>1.6</option>
            <option>1.7</option>
            <option>1.8</option>
            <option>1.9</option>
            <option>2.0</option>
            <option>2.1</option>
            <option>2.2</option>
            <option>2.3</option>
            <option>2.4</option>
            <option>2.5</option>
            <option>2.6</option>
            <option>2.7</option>
            <option>2.8</option>
            <option>2.9</option>
            <option>3.0</option>
            <option>3.1</option>
            <option>3.2</option>
            <option>3.3</option>
            <option>3.4</option>
            <option>3.5</option>
            <option>3.6</option>
            <option>3.7</option>
            <option>3.8</option>
            <option>3.9</option>
            <option>4.0</option>
            <option>4.1</option>
            <option>4.2</option>
            <option>4.3</option>
            <option>4.4</option>
            <option>4.5</option>
            <option>4.6</option>
            <option>4.7</option>
            <option>4.8</option>
            <option>4.9</option>
            <option>5.0</option>
            <option>5.1</option>
            <option>5.2</option>
            <option>5.3</option>
            <option>5.4</option>
            <option>5.5</option>
            <option>5.6</option>
            <option>5.7</option>
            <option>5.8</option>
            <option>5.9</option>
            <option>6.0</option>
            <option>6.1</option>
            <option>6.2</option>
            <option>6.3</option>
            <option>6.4</option>
            <option>6.5</option>
            <option>6.6</option>
            <option>6.7</option>
            <option>6.8</option>
            <option>6.9</option>
            <option>7.0</option>
            <option>7.1</option>
            <option>7.2</option>
            <option>7.3</option>
            <option>7.4</option>
            <option>7.5</option>
            <option>7.6</option>
            <option>7.7</option>
            <option>7.8</option>
            <option>7.9</option>
            <option>8.0</option>
            <option>8.1</option>
            <option>8.2</option>
            <option>8.3</option>
            <option>8.4</option>
            <option>8.5</option>
            <option>8.6</option>
            <option>8.7</option>
            <option>8.8</option>
            <option>8.9</option>
            <option>9.0</option>
            <option>9.1</option>
            <option>9.2</option>
            <option>9.3</option>
            <option>9.4</option>
            <option>9.5</option>
            <option>9.6</option>
            <option>9.7</option>
            <option>9.8</option>
            <option>9.9</option>
            <option>10</option>

          </select>
          to
          <select name="user_rating-max">

            <option>1.0</option>
            <option>1.1</option>
            <option>1.2</option>
            <option>1.3</option>
            <option>1.4</option>
            <option>1.5</option>
            <option>1.6</option>
            <option>1.7</option>
            <option>1.8</option>
            <option>1.9</option>
            <option>2.0</option>
            <option>2.1</option>
            <option>2.2</option>
            <option>2.3</option>
            <option>2.4</option>
            <option>2.5</option>
            <option>2.6</option>
            <option>2.7</option>
            <option>2.8</option>
            <option>2.9</option>
            <option>3.0</option>
            <option>3.1</option>
            <option>3.2</option>
            <option>3.3</option>
            <option>3.4</option>
            <option>3.5</option>
            <option>3.6</option>
            <option>3.7</option>
            <option>3.8</option>
            <option>3.9</option>
            <option>4.0</option>
            <option>4.1</option>
            <option>4.2</option>
            <option>4.3</option>
            <option>4.4</option>
            <option>4.5</option>
            <option>4.6</option>
            <option>4.7</option>
            <option>4.8</option>
            <option>4.9</option>
            <option>5.0</option>
            <option>5.1</option>
            <option>5.2</option>
            <option>5.3</option>
            <option>5.4</option>
            <option>5.5</option>
            <option>5.6</option>
            <option>5.7</option>
            <option>5.8</option>
            <option>5.9</option>
            <option>6.0</option>
            <option>6.1</option>
            <option>6.2</option>
            <option>6.3</option>
            <option>6.4</option>
            <option>6.5</option>
            <option>6.6</option>
            <option>6.7</option>
            <option>6.8</option>
            <option>6.9</option>
            <option>7.0</option>
            <option>7.1</option>
            <option>7.2</option>
            <option>7.3</option>
            <option>7.4</option>
            <option>7.5</option>
            <option>7.6</option>
            <option>7.7</option>
            <option>7.8</option>
            <option>7.9</option>
            <option>8.0</option>
            <option>8.1</option>
            <option>8.2</option>
            <option>8.3</option>
            <option>8.4</option>
            <option>8.5</option>
            <option>8.6</option>
            <option>8.7</option>
            <option>8.8</option>
            <option>8.9</option>
            <option>9.0</option>
            <option>9.1</option>
            <option>9.2</option>
            <option>9.3</option>
            <option>9.4</option>
            <option>9.5</option>
            <option>9.6</option>
            <option>9.7</option>
            <option>9.8</option>
            <option>9.9</option>
            <option>10</option>

            <option value="" selected="true">-</option>
          </select>

        </div>
      </div>



      <div class="form-group">
        <div class="label">

          <h3>Genres</h3>
        </div>
        <div class="inputs">


          <table>
            <tbody>
            <tr>
              <td style="width:27%"><input id="genres-1" type="checkbox" name="genres" value="action"> <label for="genres-1">Action</label></td>
              <td style="width:27%"><input id="genres-2" type="checkbox" name="genres" value="adventure"> <label for="genres-2">Adventure</label></td>
              <td style="width:27%"><input id="genres-3" type="checkbox" name="genres" value="animation"> <label for="genres-3">Animation</label></td>
              <td style="width:27%"><input id="genres-4" type="checkbox" name="genres" value="biography"> <label for="genres-4">Biography</label></td>
            </tr>
            <tr>
              <td><input id="genres-5" type="checkbox" name="genres" value="comedy"> <label for="genres-5">Comedy</label></td>
              <td><input id="genres-6" type="checkbox" name="genres" value="crime"> <label for="genres-6">Crime</label></td>
              <td><input id="genres-7" type="checkbox" name="genres" value="documentary"> <label for="genres-7">Documentary</label></td>
              <td><input id="genres-8" type="checkbox" name="genres" value="drama"> <label for="genres-8">Drama</label></td>
            </tr>
            <tr>
              <td><input id="genres-9" type="checkbox" name="genres" value="family"> <label for="genres-9">Family</label></td>
              <td><input id="genres-10" type="checkbox" name="genres" value="fantasy"> <label for="genres-10">Fantasy</label></td>
              <td><input id="genres-11" type="checkbox" name="genres" value="film_noir"> <label for="genres-11">Film-Noir</label></td>
              <td><input id="genres-12" type="checkbox" name="genres" value="game_show"> <label for="genres-12">Game-Show</label></td>
            </tr>
            <tr>
              <td><input id="genres-13" type="checkbox" name="genres" value="history"> <label for="genres-13">History</label></td>
              <td><input id="genres-14" type="checkbox" name="genres" value="horror"> <label for="genres-14">Horror</label></td>
              <td><input id="genres-15" type="checkbox" name="genres" value="music"> <label for="genres-15">Music</label></td>
              <td><input id="genres-16" type="checkbox" name="genres" value="musical"> <label for="genres-16">Musical</label></td>
            </tr>
            <tr>
              <td><input id="genres-17" type="checkbox" name="genres" value="mystery"> <label for="genres-17">Mystery</label></td>
              <td><input id="genres-18" type="checkbox" name="genres" value="news"> <label for="genres-18">News</label></td>
              <td><input id="genres-19" type="checkbox" name="genres" value="reality_tv"> <label for="genres-19">Reality-TV</label></td>
              <td><input id="genres-20" type="checkbox" name="genres" value="romance"> <label for="genres-20">Romance</label></td>
            </tr>
            <tr>
              <td><input id="genres-21" type="checkbox" name="genres" value="sci_fi"> <label for="genres-21">Sci-Fi</label></td>
              <td><input id="genres-22" type="checkbox" name="genres" value="sport"> <label for="genres-22">Sport</label></td>
              <td><input id="genres-23" type="checkbox" name="genres" value="talk_show"> <label for="genres-23">Talk-Show</label></td>
              <td><input id="genres-24" type="checkbox" name="genres" value="thriller"> <label for="genres-24">Thriller</label></td>
            </tr>
            <tr><td><input id="genres-25" type="checkbox" name="genres" value="war"> <label for="genres-25">War</label></td>
              <td><input id="genres-26" type="checkbox" name="genres" value="western"> <label for="genres-26">Western</label></td>
            </tr>
            </tbody>
          </table>


        </div>
      </div>

        <p>
          <button type="submit" class="primary" method="get">Search</button>
        </p>

      </div>
    </form>
    {% if not searched %}
    <div class="container-fluid padding">
    <div class="row welcome text-center">
    	<div class="col-12">
    		<h1 class="display-4">Want to find some movies?</h1>
    	</div>
    	<hr>
    	<div class="col-12">
    		<p class="lead">Try to fill out your preference and click submit!
    		</p>
    	</div>
    </div>
    </div>
    {% else %}
    <script>
      function myFunc(vars) {
          return vars
      }
      var movie_list =  myFunc({{movies_instance|tojson}});
      console.log(movie_list);
      for(var i = 0; i < Math.floor(movie_list.length/4) + 1; i ++){
  				if(4 * i + 4 < movie_list.length){
  					$('body').append(
  								'<div class="container-fluid padding">' +
  								'<div class="row padding">' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 0][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 0][1]  + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 0][2] + '(' + movie_list[4*i + 0][4] +')' + '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 0][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 1][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 1][1] + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 1][2] + '(' + movie_list[4*i + 1][4] +')'+ '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 1][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 2][0]  + '">' +
  										'<img class="card-img-top movie_card"  src=' + movie_list[4*i + 2][1] + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 2][2] + '(' + movie_list[4*i + 2][4] +')' +  '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 2][6]  + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 3][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 3][1] + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 3][2] + '(' + movie_list[4*i + 3][4] +')' + '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 3][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'</div>' +
  								'</div>');

  				}else if(4 * i + 3 <= movie_list.length){
  					$('body').append(
  								'<div class="container-fluid padding">' +
  								'<div class="row padding">' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 0][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 0][1]  + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 0][2] + '(' + movie_list[4*i + 0][4] +')' + '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 0][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 1][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 1][1] + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 1][2] + '(' + movie_list[4*i + 1][4] +')'+ '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 1][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 2][0]  + '">' +
  										'<img class="card-img-top movie_card"  src=' + movie_list[4*i + 2][1] + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 2][2] + '(' + movie_list[4*i + 2][4] +')' +  '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 2][6]  + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>'+
  								'</div>' +
  								'</div>');

  				}else if(4 * i + 2 <= movie_list.length){
  					$('body').append(
  								'<div class="container-fluid padding">' +
  								'<div class="row padding">' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 0][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 0][1]  + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 0][2] + '(' + movie_list[4*i + 0][4] +')' + '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 0][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 1][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 1][1] + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 1][2] + '(' + movie_list[4*i + 1][4] +')'+ '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 1][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'</div>' +
  								'</div>');

  				}else if(4 * i + 1 <= movie_list.length){
  					$('body').append(
  								'<div class="container-fluid padding">' +
  								'<div class="row padding">' +
  								'<div class="col-md-3">'+
  									'<div class="card">'+
  										'<a href="http://127.0.0.1:5000/movie/' + movie_list[4*i + 0][0]  + '">' +
  										'<img class="card-img-top movie_card" src=' + movie_list[4*i + 0][1]  + '>'+
  										'</a>' +
  										'<div class="card-body">' +
  											'<h4 class="card-title">' + movie_list[4*i + 0][2] + '(' + movie_list[4*i + 0][4] +')' + '</h4>'+
  											'<p class="card-text">' + movie_list[4*i + 0][6] + '</p>'+
  											'<a href="#" class="btn btn-outline-secondary">'+
  												'See Profile' +
  											'</a>' +
  										'</div>' +
  									'</div>	'+
  								'</div>' +
  								'</div>' +
  								'</div>');
  				}
  		}
    </script>
    <p>{{movie_list}}</p>
    {% endif %}

{% endblock %}
